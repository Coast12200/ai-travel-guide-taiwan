  /* Dark mode: review summary block */
  body.dark-mode .review-summary-block blockquote {
    background-color: #333333;
    border-left-color: var(--sky-blue);
  }

  body.dark-mode .review-summary-block blockquote h3 {
    color: var(--dark-text);
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .review-summary-block blockquote h3 strong {
    color: var(--sun-orange);
  }

  body.dark-mode .review-summary-block blockquote h4 {
    color: var(--light-text);
  }

  body.dark-mode .review-summary-block blockquote ul li {
    color: var(--muted);
  }

  /* Dark mode: TTS play button */
  body.dark-mode .tts-play-btn {
    background-color: var(--sky-blue);
    color: white;
  }

  body.dark-mode .tts-play-btn:hover {
    background-color: var(--grass-green);
    box-shadow: 0 4px 12px rgba(97, 150, 130, 0.5);
  }

  body.dark-mode .tts-play-btn.loading {
    background-color: var(--sun-orange);
    opacity: 0.8;
  }

  body.dark-mode .tts-play-btn.playing {
    background-color: var(--grass-green);
    box-shadow: 0 0 12px rgba(97, 150, 130, 0.8);
  }

  body.dark-mode {
    background-color: #1b1b1b;
    color: #eee;
    --off-white: #1b1b1b;
    --dark-text: #f5f5f5;
    --light-text: #cfcfcf;
    --muted: #a8a8a8;

    /* Dark Mode Background Colors */
    --bg-light: #1b1b1b;
    --bg-input: #2b2b2b;
    --bg-card: #2b2b2b;
    --bg-panel: #2b2b2b;
    --bg-placeholder: #2b2b2b;
    --bg-skeleton: #333;

    /* Dark Mode Border & UI Colors */
    --border-color: rgba(255, 255, 255, 0.1);
    --border-input: rgba(255, 255, 255, 0.1);
    --border-light: rgba(255, 255, 255, 0.1);
    --text-white: #ffffff;
    --text-muted: #cfcfcf;

    /* Dark Mode Utility Colors */
    --status-success-bg: #1e4620;
    --status-success-text: #90ee90;
    --status-success-border: #2d5a2d;
    --status-error-bg: #4a1a1a;
    --status-error-text: #ff6b6b;
    --status-error-border: #662222;
    --diagnostics-bg: #2b2b2b;
    --diagnostics-border: #444;
    --overlay-dark: rgba(0, 0, 0, 0.7);
    --overlay-medium: rgba(0, 0, 0, 0.6);
    --overlay-heavy: rgba(0, 0, 0, 0.9);
    --spinner-light: rgba(255, 255, 255, 0.6);
    --spinner-light-full: rgba(255, 255, 255, 1);
    --card-icon-bg: var(--sky-blue);
    --weather-bg: #333;
    --skeleton-pulse: #444;
  }

  body.dark-mode .panel,
  body.dark-mode .ai-bubble,
  body.dark-mode .destination-card,
  body.dark-mode .steps-guide {
    background-color: #2b2b2b;
    border-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .btn,
  body.dark-mode .enhanced-btn {
    background-color: #444;
    color: #fff;
    border-color: #777;
  }

  body.dark-mode .btn:hover,
  body.dark-mode .enhanced-btn:hover {
    background-color: #606c38;
    color: #ffffff;
  }

  body.dark-mode .country-tab.active {
    background-color: var(--sky-blue);
    color: #000;
  }

  body.dark-mode .suggestion-btn:hover {
    color: #1b1b1b;
  }

  body.dark-mode #multiDayBtn:hover,
  body.dark-mode #transportBtn:hover {
    color: white;
  }

  /* Dark mode for itinerary list items */
  body.dark-mode .itinerary-location-item {
    background-color: #2b2b2b;
    border-color: rgba(255, 255, 255, 0.1);
    color: #eee;
  }

  body.dark-mode .itinerary-location-item:hover {
    background-color: #333;
    border-color: var(--sky-blue);
  }

  body.dark-mode .itinerary-location-item.highlighted {
    background: linear-gradient(90deg, rgba(162, 210, 255, 0.25), transparent);
    border-color: var(--sky-blue);
    border-left-color: var(--sky-blue);
  }

  /* Dark mode status-info with better contrast */
  body.dark-mode .status-info {
    background: linear-gradient(90deg, #2b2b2b 0%, #333 100%);
    border-color: rgba(162, 210, 255, 0.3);
    color: #e8e8e8;
  }

  /* Dark mode label and small text improvements */
  body.dark-mode label {
    color: var(--dark-text);
  }

  body.dark-mode small {
    color: var(--muted);
  }

  body.dark-mode .label-inline {
    color: var(--muted);
  }

  /* Dark mode accordion header hover states */
  body.dark-mode .region-accordion-header {
    background: #333;
    color: var(--dark-text);
  }

  body.dark-mode .region-accordion-header:hover {
    background-color: #3f4f2f;
    color: #ffffff;
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header {
    background-color: var(--sky-blue);
    color: #000;
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header:hover {
    background-color: #8abde4;
    color: #000;
  }

  /* Dark mode advanced settings accordion */
  body.dark-mode .advanced-settings-accordion .region-accordion-header {
    background: #333;
    color: var(--dark-text);
  }

  body.dark-mode .advanced-settings-accordion .region-accordion-header:hover {
    background-color: #3f4f2f;
    color: #ffffff;
  }

  /* Dark mode: AI ?�費估�? (currency converter) */
  body.dark-mode #aiCurrencyConverter {
    background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%) !important;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
    padding: 14px !important;
    border-radius: 8px;
  }

  body.dark-mode #aiCurrencyConverter p {
    color: var(--light-text);
    margin: 0 0 8px 0;
  }

  body.dark-mode #aiCurrencyConverter .api-input,
  body.dark-mode #aiCurrencyConverter input.api-input,
  body.dark-mode #aiCurrencyConverter input[type="number"],
  body.dark-mode #aiCurrencyConverter input[type="text"] {
    background-color: #222425;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: none;
  }

  body.dark-mode #aiCurrencyConverter input::placeholder,
  body.dark-mode #aiCurrencyConverter input::-webkit-input-placeholder {
    color: rgba(232, 232, 232, 0.45);
  }

  /* Make the estimate button clearly visible in dark mode */
  body.dark-mode #aiCurrencyConverter button#convertCurrencyBtn {
    background: var(--grass-green);
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.1);
    width: 100%;
    padding: 10px 14px;
  }

  body.dark-mode #aiCurrencyConverter button#convertCurrencyBtn:hover {
    filter: brightness(1.05);
  }

  /* Ensure inner elements such as the small label and helper text are readable */
  body.dark-mode #aiCurrencyConverter small,
  body.dark-mode #aiCurrencyConverter label,
  body.dark-mode #aiCurrencyConverter .label-inline {
    color: var(--muted);
  }


  /* Dark mode AI reply boxes and content */
  body.dark-mode #aiEnhancedContent,
  body.dark-mode #transportContent,
  body.dark-mode #reviewSummaryContent,
  body.dark-mode #souvenirContent,
  body.dark-mode #ttsPlayerContainer,
  body.dark-mode #descriptionContent {
    background: linear-gradient(135deg, #3a3a3a 0%, #2a3a4a 100%) !important;
    color: #e0e0e0;
  }

  body.dark-mode #aiEnhancedContent h3,
  body.dark-mode #transportContent h3,
  body.dark-mode #suggestionContent h3 {
    color: #e8e8e8;
  }

  body.dark-mode #aiEnhancedContent strong,
  body.dark-mode #transportContent strong,
  body.dark-mode #suggestionContent strong {
    color: #a8d5ba;
  }

  /* Dark mode for attraction illustration container */
  body.dark-mode #attractionIllustrationContainer {
    background-color: #2b2b2b;
    color: #e0e0e0;
  }

  /* Dark mode loading indicator */
  /* Dark mode loading indicator - ensure high contrast against dark backgrounds */
  body.dark-mode .loading {
    color: #e8e8e8 !important;
  }

  /* Ensure loading text inside AI bubbles and specific panels is readable */
  body.dark-mode .ai-bubble .loading,
  body.dark-mode #descriptionContent .loading,
  body.dark-mode #aiEnhancedContent .loading,
  body.dark-mode #suggestionContent .loading {
    color: #e8e8e8 !important;
  }

  body.dark-mode .spinner {
    border-color: rgba(255, 255, 255, 0.2);
    border-top-color: var(--sun-orange);
  }

  /* Stronger contrast and readability for AI bubbles and the description panel
     Ensure loading and generated text are clearly visible over gradients */
  body.dark-mode .ai-bubble,
  body.dark-mode #descriptionContent,
  body.dark-mode #aiEnhancedContent,
  body.dark-mode #suggestionContent,
  body.dark-mode #reviewSummaryContent,
  body.dark-mode #souvenirContent {
    color: #f5f5f5 !important;
    /* keep the existing dark backgrounds but ensure text stands out */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }

  /* Dark mode: souvenir list */
  body.dark-mode .souvenir-list {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #33363a 0%, #2a3136 100%);
    color: #e8e8e8;
  }

  body.dark-mode .souvenir-list h3 {
    color: #a8d67c;
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  body.dark-mode .souvenir-list p {
    color: var(--light-text);
  }

  body.dark-mode .souvenir-list strong {
    color: var(--sky-blue);
    font-weight: 600;
  }

  body.dark-mode .souvenir-list ul li {
    color: var(--muted);
  }

  body.dark-mode .souvenir-list ul li::before {
    content: "??";
    color: var(--sun-orange);
  }

  /* Target paragraphs and inline text inside AI bubbles explicitly */
  body.dark-mode .ai-bubble p,
  body.dark-mode #descriptionContent p,
  body.dark-mode .ai-bubble span,
  body.dark-mode #descriptionContent span {
    color: #f5f5f5 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }

  /* Dark mode: AI feedback input and buttons */
  body.dark-mode .ai-feedback textarea.fb-comment {
    background-color: #2b2b2b;
    /* panel-like background */
    color: #e8e8e8 !important;
    border-color: rgba(255, 255, 255, 0.08) !important;
    box-shadow: none;
  }

  body.dark-mode .ai-feedback textarea.fb-comment::placeholder {
    color: rgba(232, 232, 232, 0.5);
  }

  body.dark-mode .ai-feedback button.fb-btn {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(255, 255, 255, 0.08);
    color: var(--light-text);
    padding: 8px 10px;
    border-radius: 10px;
    transition: background-color 0.18s ease, transform 0.12s ease;
  }

  body.dark-mode .ai-feedback button.fb-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
  }

  /* Primary action buttons in the feedback submit area */
  body.dark-mode .ai-feedback .fb-submit button {
    background: linear-gradient(90deg, #2f8fd0 0%, #1f6fb3 100%);
    color: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.18);
    padding: 8px 12px;
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(10, 30, 50, 0.45);
    transition: filter 0.12s ease, transform 0.12s ease;
  }

  body.dark-mode .ai-feedback .fb-submit button:hover {
    filter: brightness(1.06);
    transform: translateY(-1px);
  }

  /* If there are two submit-style buttons (e.g. send/report), make the secondary one more subtle */
  body.dark-mode .ai-feedback .fb-submit button.secondary {
    background: rgba(255, 255, 255, 0.04);
    color: var(--light-text);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: none;
  }

  /* Ensure any loading message inside those panels is readable */
  body.dark-mode #descriptionContent .loading,
  body.dark-mode #aiEnhancedContent .loading,
  body.dark-mode #suggestionContent .loading {
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
    font-weight: 600;
  }

  /* Dark-mode tweaks for story container */
  body.dark-mode .story-container h2 {
    border-left-color: var(--sun-orange);
    color: #a8d67c;
  }

  body.dark-mode .story-container {
    color: #e8e8e8;
    background: linear-gradient(180deg, rgba(40, 40, 40, 0.6), rgba(30, 30, 30, 0.9));
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #e8e8e8;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
  }

  body.dark-mode .download-dropdown .download-option {
    color: #e8e8e8;
    padding: 8px 12px;
  }

  body.dark-mode .download-dropdown .download-option:hover {
    background: rgba(255, 255, 255, 0.03);
  }

  /* Dark mode: Leaflet map controls and routing text contrast fixes */
  body.dark-mode .leaflet-control,
  body.dark-mode .leaflet-control a,
  body.dark-mode .leaflet-control button {
    background: rgba(28, 28, 28, 0.9) !important;
    color: #efefef !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.6) !important;
  }

  /* Routing machine container (instructions, waypoints) */
  body.dark-mode .leaflet-routing-container {
    background: linear-gradient(180deg, #232323 0%, #1e1e1e 100%) !important;
    color: #efefef !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
  }

  body.dark-mode .leaflet-routing-instruction,
  body.dark-mode .leaflet-routing-alt,
  body.dark-mode .leaflet-routing-leg,
  body.dark-mode .leaflet-routing-summary {
    color: #f5f5f5 !important;
    text-shadow: none !important;
  }

  /* Popups and popover content on the map */
  body.dark-mode .leaflet-popup-content,
  body.dark-mode .leaflet-popup-content-wrapper,
  body.dark-mode .leaflet-popup-tip {
    background: #1f1f1f !important;
    color: #f5f5f5 !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
  }

  /* Ensure high-contrast labels for routing steps when displayed over map tiles */
  body.dark-mode .leaflet-routing-leg .leaflet-routing-instruction {
    background: rgba(0, 0, 0, 0.45);
    padding: 6px 8px;
    border-radius: 6px;
  }

  /* Dark mode for photo spots */
  body.dark-mode .photo-spots-markdown-container {
    border-color: rgba(255, 255, 255, 0.15);
    background: linear-gradient(135deg, #3a3a3a 0%, #2a3a4a 100%) !important;
  }

  body.dark-mode .photo-spots-markdown-container,
  body.dark-mode .photo-spots-markdown-container p {
    color: #e8e8e8 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }

  body.dark-mode .photo-spots-markdown-container h2,
  body.dark-mode .photo-spots-markdown-container h3 {
    color: #a8d67c !important;
    border-left-color: var(--sun-orange);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }

  body.dark-mode .photo-spots-markdown-container li {
    color: #e8e8e8 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }

  body.dark-mode .photo-spots-markdown-container li::before {
    color: var(--sky-blue) !important;
  }

  body.dark-mode .photo-spots-markdown-container strong {
    color: #a8d67c !important;
    font-weight: 600;
  }

  /* --- Dark Mode AI 行�?規�??��??��? (Timeline �??調整) --- */

  body.dark-mode #suggestionContent::before {
    background-color: rgba(255, 255, 255, 0.1);
    /* 深色?�景下�?淺色�?*/
  }

  body.dark-mode #suggestionContent h3 {
    background-color: var(--sky-blue);
    /* 保�?高亮 accent ??*/
    color: #000;
    /* 確�??��??�亮?��??��??�深?��? */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  }

  body.dark-mode #suggestionContent h3::before {
    background-color: var(--sun-orange);
    border: 4px solid var(--bg-card);
    /* 深色模�?下�?外環??*/
  }

  body.dark-mode #suggestionContent ul li {
    border-bottom: 1px dashed rgba(255, 255, 255, 0.08);
    /* 淺色?��? */
    color: var(--light-text);
  }

  body.dark-mode #suggestionContent ul li::before {
    color: var(--grass-green);
  }

  /* --- Dark Mode: 調整?��??�調以�??�可讀?��??��?�?--- */
  body.dark-mode #suggestionContent {
    /* ?��??��?深色底色，�?少�? h3 ?�強?��?�?*/
    background: linear-gradient(180deg, rgba(20, 24, 26, 0.86), rgba(28, 32, 34, 0.92)) !important;
    border: 1px solid rgba(255, 255, 255, 0.04);
    padding: 18px !important;
    border-radius: 8px;
  }

  body.dark-mode #suggestionContent p,
  body.dark-mode #suggestionContent li,
  body.dark-mode #suggestionContent span {
    color: var(--light-text);
  }

  /* �?h3 ?��??�色不那麼刺?��??��??�淺?�以?�閱讀 */
  body.dark-mode #suggestionContent h3 {
    background-color: rgba(100, 150, 240, 0.12);
    /* ?��?淺�? */
    color: #e8f6ff;
    /* 淺色?��? */
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(100, 150, 240, 0.06);
  }

  /* 點�?外環微調，�??��?微�?影使點�??��???*/
  body.dark-mode #suggestionContent h3::before {
    background-color: var(--sun-orange);
    border: 4px solid var(--bg-panel);
    box-shadow: 0 0 0 4px rgba(255, 170, 50, 0.04);
  }

  /* 活�?清單底�??��?字�??�微�?*/
  body.dark-mode #suggestionContent ul li {
    border-bottom: 1px dashed rgba(255, 255, 255, 0.035);
    color: var(--light-text);
  }

  body.dark-mode #suggestionContent ul li::before {
    color: var(--grass-green);
    opacity: 0.95;
  }

  /* ?�極窄�?窗�?減�? h3 左側?�移?��?溢出 */
  @media (max-width: 480px) {
    body.dark-mode #suggestionContent {
      padding-left: 18px;
    }

    body.dark-mode #suggestionContent h3 {
      margin-left: -6px;
      padding-left: 20px;
      font-size: 1.05rem;
    }

    body.dark-mode #suggestionContent h3::before {
      left: -12px;
      width: 12px;
      height: 12px;
    }
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header {
    background-color: var(--sky-blue);
    color: #000;
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header:hover {
    background-color: #8abde4;
    color: #000;
  }

  /* Dark mode advanced settings accordion */
  body.dark-mode .advanced-settings-accordion .region-accordion-header {
    background: #333;
    color: var(--dark-text);
  }

  body.dark-mode .advanced-settings-accordion .region-accordion-header:hover {
    background-color: #3f4f2f;
    color: #ffffff;
  }

  /* Dark mode AI bubble text contrast */
  body.dark-mode #suggestionContent {
    background: linear-gradient(135deg, #3a3a3a 0%, #2a3a4a 100%);
  }

  body.dark-mode #suggestionContent p {
    color: #e0e0e0;
  }

  /* Dark mode: ?�地美�?清單 */
  body.dark-mode .food-spots-list {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #33363a 0%, #2a3136 100%);
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list h3 {
    color: var(--sky-blue);
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  body.dark-mode .food-spots-list p {
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list ul li {
    color: var(--muted);
  }

  body.dark-mode .food-spots-list strong {
    color: #a8d67c;
  }

  /* Dark mode: Feedback and Contingency Modals */
  body.dark-mode .modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header h3 {
    color: #e8e8e8;
  }

  body.dark-mode .modal .modal-close {
    color: #999;
  }

  body.dark-mode .modal .modal-close:hover {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  body.dark-mode .feedback-text {
    background: #1b1b1b;
    color: #e8e8e8;
    border-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .feedback-text::placeholder {
    color: #666;
  }

  body.dark-mode .feedback-text:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 3px rgba(162, 210, 255, 0.1);
  }

  body.dark-mode .contingency-result h4,
  body.dark-mode .contingency-result h5 {
    color: #e8e8e8;
  }

  body.dark-mode .contingency-itinerary {
    background: #1b1b1b;
    border-left-color: #fca311;
  }

  body.dark-mode .contingency-result ul li::before {
    color: #27a639;
  }

  body.dark-mode .btn-feedback {
    background: #fca311;
    color: #1b1b1b;
  }

  body.dark-mode .btn-feedback:hover {
    background: #e08f0a;
    opacity: 0.9;
  }

  /* Dark mode: Toast notifications */
  body.dark-mode #toastContainer .toast-success {
    background-color: #2d8a47;
  }

  body.dark-mode #toastContainer .toast-error {
    background-color: #a01a2e;
  }

  body.dark-mode #toastContainer .toast-info {
    background-color: #5a7fa0;
  }

  body.dark-mode #toastContainer .toast-warning {
    background-color: #d17a1f;
    color: #e8e8e8;
  }

  body.dark-mode #toastContainer .toast-loading {
    background-color: #556b7f;
  }

  /* Dark mode: Modal content (Quick Start Guide, etc.) */
  body.dark-mode .modal-overlay {
    background: var(--overlay-dark);
  }

  body.dark-mode .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-content h3 {
    color: #e8e8e8;
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  /* 活�?清單底�??��?字�??�微�?*/
  body.dark-mode #suggestionContent ul li {
    border-bottom: 1px dashed rgba(255, 255, 255, 0.035);
    color: var(--light-text);
  }

  body.dark-mode #suggestionContent ul li::before {
    color: var(--grass-green);
    opacity: 0.95;
  }

  /* ?�極窄�?窗�?減�? h3 左側?�移?��?溢出 */
  @media (max-width: 480px) {
    body.dark-mode #suggestionContent {
      padding-left: 18px;
    }

    body.dark-mode #suggestionContent h3 {
      margin-left: -6px;
      padding-left: 20px;
      font-size: 1.05rem;
    }

    body.dark-mode #suggestionContent h3::before {
      left: -12px;
      width: 12px;
      height: 12px;
    }
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header {
    background-color: var(--sky-blue);
    color: #000;
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header:hover {
    background-color: #8abde4;
    color: #000;
  }

  /* Dark mode advanced settings accordion */
  body.dark-mode .advanced-settings-accordion .region-accordion-header {
    background: #333;
    color: var(--dark-text);
  }

  body.dark-mode .advanced-settings-accordion .region-accordion-header:hover {
    background-color: #3f4f2f;
    color: #ffffff;
  }

  /* Dark mode AI bubble text contrast */
  body.dark-mode #suggestionContent {
    background: linear-gradient(135deg, #3a3a3a 0%, #2a3a4a 100%);
  }

  body.dark-mode #suggestionContent p {
    color: #e0e0e0;
  }

  /* Dark mode: ?�地美�?清單 */
  body.dark-mode .food-spots-list {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #33363a 0%, #2a3136 100%);
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list h3 {
    color: var(--sky-blue);
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  body.dark-mode .food-spots-list p {
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list ul li {
    color: var(--muted);
  }

  body.dark-mode .food-spots-list strong {
    color: #a8d67c;
  }

  /* Dark mode: Feedback and Contingency Modals */
  body.dark-mode .modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header h3 {
    color: #e8e8e8;
  }

  body.dark-mode .modal .modal-close {
    color: #999;
  }

  body.dark-mode .modal .modal-close:hover {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  body.dark-mode .feedback-text {
    background: #1b1b1b;
    color: #e8e8e8;
    border-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .feedback-text::placeholder {
    color: #666;
  }

  body.dark-mode .feedback-text:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 3px rgba(162, 210, 255, 0.1);
  }

  body.dark-mode .contingency-result h4,
  body.dark-mode .contingency-result h5 {
    color: #e8e8e8;
  }

  body.dark-mode .contingency-itinerary {
    background: #1b1b1b;
    border-left-color: #fca311;
  }

  body.dark-mode .contingency-result ul li::before {
    color: #27a639;
  }

  body.dark-mode .btn-feedback {
    background: #fca311;
    color: #1b1b1b;
  }

  body.dark-mode .btn-feedback:hover {
    background: #e08f0a;
    opacity: 0.9;
  }

  /* Dark mode: Toast notifications */
  body.dark-mode #toastContainer .toast-success {
    background-color: #2d8a47;
  }

  body.dark-mode #toastContainer .toast-error {
    background-color: #a01a2e;
  }

  body.dark-mode #toastContainer .toast-info {
    background-color: #5a7fa0;
  }

  body.dark-mode #toastContainer .toast-warning {
    background-color: #d17a1f;
    color: #e8e8e8;
  }

  body.dark-mode #toastContainer .toast-loading {
    background-color: #556b7f;
  }

  /* Dark mode: Modal content (Quick Start Guide, etc.) */
  body.dark-mode .modal-overlay {
    background: var(--overlay-dark);
  }

  body.dark-mode .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-content h3 {
    color: #e8e8e8;
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-close-btn {
    color: #999;
  }

  body.dark-mode #onboardSteps h4 {
    color: #a8d5ba;
  }

  body.dark-mode #onboardSteps p {
    color: #cfcfcf;
  }

  /* Dark mode: Itinerary Changes Section */
  body.dark-mode #itineraryChanges {
    background: linear-gradient(135deg, #2d2416 0%, #3d3020 100%) !important;
    border-left-color: #ff9800 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }

  body.dark-mode #itineraryChanges h4 {
    color: #ffb74d !important;
  }

  body.dark-mode #itineraryChanges ul {
    color: #d7ccc8 !important;
  }

  body.dark-mode #itineraryChanges li {
    color: #d7ccc8 !important;
  }

  /* Dark mode: Improve Itinerary Modal */
  body.dark-mode .improve-modal .modal-content,
  body.dark-mode .adjust-modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
  }

  body.dark-mode .improve-modal .modal-body p,
  body.dark-mode .adjust-modal .modal-body p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn {
    background: #333 !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn h4 {
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn:hover {
    background: #3a3a3a !important;
    border-color: var(--sky-blue) !important;
  }

  body.dark-mode .adjust-modal .feedback-options label {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.15);
    color: #e8e8e8;
  }

  body.dark-mode .adjust-modal .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header {
    background-color: var(--sky-blue);
    color: #000;
  }

  body.dark-mode .region-accordion-item.active .region-accordion-header:hover {
    background-color: #8abde4;
    color: #000;
  }

  /* Dark mode advanced settings accordion */
  body.dark-mode .advanced-settings-accordion .region-accordion-header {
    background: #333;
    color: var(--dark-text);
  }

  body.dark-mode .advanced-settings-accordion .region-accordion-header:hover {
    background-color: #3f4f2f;
    color: #ffffff;
  }

  /* Dark mode AI bubble text contrast */
  body.dark-mode #suggestionContent {
    background: linear-gradient(135deg, #3a3a3a 0%, #2a3a4a 100%);
  }

  body.dark-mode #suggestionContent p {
    color: #e0e0e0;
  }

  /* Dark mode: ?�地美�?清單 */
  body.dark-mode .food-spots-list {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    background: linear-gradient(135deg, #33363a 0%, #2a3136 100%);
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list h3 {
    color: var(--sky-blue);
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  body.dark-mode .food-spots-list p {
    color: #e8e8e8;
  }

  body.dark-mode .food-spots-list ul li {
    color: var(--muted);
  }

  body.dark-mode .food-spots-list strong {
    color: #a8d67c;
  }

  /* Dark mode: Feedback and Contingency Modals */
  body.dark-mode .modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal .modal-header h3 {
    color: #e8e8e8;
  }

  body.dark-mode .modal .modal-close {
    color: #999;
  }

  body.dark-mode .modal .modal-close:hover {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label {
    color: #e8e8e8;
  }

  body.dark-mode .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  body.dark-mode .feedback-text {
    background: #1b1b1b;
    color: #e8e8e8;
    border-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .feedback-text::placeholder {
    color: #666;
  }

  body.dark-mode .feedback-text:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 3px rgba(162, 210, 255, 0.1);
  }

  body.dark-mode .contingency-result h4,
  body.dark-mode .contingency-result h5 {
    color: #e8e8e8;
  }

  body.dark-mode .contingency-itinerary {
    background: #1b1b1b;
    border-left-color: #fca311;
  }

  body.dark-mode .contingency-result ul li::before {
    color: #27a639;
  }

  body.dark-mode .btn-feedback {
    background: #fca311;
    color: #1b1b1b;
  }

  body.dark-mode .btn-feedback:hover {
    background: #e08f0a;
    opacity: 0.9;
  }

  /* Dark mode: Toast notifications */
  body.dark-mode #toastContainer .toast-success {
    background-color: #2d8a47;
  }

  body.dark-mode #toastContainer .toast-error {
    background-color: #a01a2e;
  }

  body.dark-mode #toastContainer .toast-info {
    background-color: #5a7fa0;
  }

  body.dark-mode #toastContainer .toast-warning {
    background-color: #d17a1f;
    color: #e8e8e8;
  }

  body.dark-mode #toastContainer .toast-loading {
    background-color: #556b7f;
  }

  /* Dark mode: Modal content (Quick Start Guide, etc.) */
  body.dark-mode .modal-overlay {
    background: var(--overlay-dark);
  }

  body.dark-mode .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-content h3 {
    color: #e8e8e8;
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-close-btn {
    color: #999;
  }

  body.dark-mode #onboardSteps h4 {
    color: #a8d5ba;
  }

  body.dark-mode #onboardSteps p {
    color: #cfcfcf;
  }

  /* Dark mode: Itinerary Changes Section */
  body.dark-mode #itineraryChanges {
    background: linear-gradient(135deg, #2d2416 0%, #3d3020 100%) !important;
    border-left-color: #ff9800 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }

  body.dark-mode #itineraryChanges h4 {
    color: #ffb74d !important;
  }

  body.dark-mode #itineraryChanges ul {
    color: #d7ccc8 !important;
  }

  body.dark-mode #itineraryChanges li {
    color: #d7ccc8 !important;
  }

  /* Dark mode: Improve Itinerary Modal */
  body.dark-mode .improve-modal .modal-content,
  body.dark-mode .adjust-modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
  }

  body.dark-mode .improve-modal .modal-body p,
  body.dark-mode .adjust-modal .modal-body p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn {
    background: #333 !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn h4 {
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn:hover {
    background: #3a3a3a !important;
    border-color: var(--sky-blue) !important;
  }

  body.dark-mode .adjust-modal .feedback-options label {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.15);
    color: #e8e8e8;
  }

  body.dark-mode .adjust-modal .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  /* ============================================
   Enhanced UI - Dark Mode
   ============================================ */

  /* Quick Start Section */
  body.dark-mode .quick-start-section {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  }

  body.dark-mode .preference-input,
  body.dark-mode .api-input.compact {
    background: #333;
    border-color: #444;
    color: #e8e8e8;
  }

  body.dark-mode .preference-input:focus,
  body.dark-mode .api-input.compact:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
  }

  body.dark-mode .info-item label {
    color: #e8e8e8;
  }

  /* Enhanced Buttons */
  body.dark-mode .suggestion-btn-enhanced {
    background: #2a2a2a;
    border-color: #444;
  }

  body.dark-mode .suggestion-btn-enhanced .btn-text strong {
    color: #e8e8e8;
  }

  body.dark-mode .suggestion-btn-enhanced .btn-text small {
    color: #999;
  }

  body.dark-mode .sunny-enhanced:hover {
    background: #3a2a1a;
    border-color: #ffa726;
  }

  body.dark-mode .rainy-enhanced:hover {
    background: #1a2a3a;
    border-color: #42a5f5;
  }

  body.dark-mode .lucky-enhanced:hover {
    background: #2a1a3a;
    border-color: #ab47bc;
  }

  body.dark-mode .multi-enhanced:hover {
    background: #1a3a2a;
    border-color: #66bb6a;
  }

  /* More Settings Toggle */
  body.dark-mode .more-settings-toggle {
    background: #2a2a2a;
    border-color: #444;
    color: #e8e8e8;
  }

  body.dark-mode .more-settings-toggle:hover {
    background: #333;
    border-color: var(--sky-blue);
  }

  body.dark-mode .more-settings-content.expanded {
    background: #2a2a2a;
    border-color: #444;
  }

  /* Settings Groups */
  body.dark-mode .settings-group {
    border-bottom-color: #444;
  }

  body.dark-mode .settings-group-title {
    color: #e8e8e8;
  }

  body.dark-mode .setting-item label {
    color: #999;
  }

  body.dark-mode #toastContainer .toast-error {
    background-color: #a01a2e;
  }

  body.dark-mode #toastContainer .toast-info {
    background-color: #5a7fa0;
  }

  body.dark-mode #toastContainer .toast-warning {
    background-color: #d17a1f;
    color: #e8e8e8;
  }

  body.dark-mode #toastContainer .toast-loading {
    background-color: #556b7f;
  }

  /* Dark mode: Modal content (Quick Start Guide, etc.) */
  body.dark-mode .modal-overlay {
    background: var(--overlay-dark);
  }

  body.dark-mode .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-content h3 {
    color: #e8e8e8;
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  body.dark-mode .modal-close-btn {
    color: #999;
  }

  body.dark-mode #onboardSteps h4 {
    color: #a8d5ba;
  }

  body.dark-mode #onboardSteps p {
    color: #cfcfcf;
  }

  /* Dark mode: Itinerary Changes Section */
  body.dark-mode #itineraryChanges {
    background: linear-gradient(135deg, #2d2416 0%, #3d3020 100%) !important;
    border-left-color: #ff9800 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }

  body.dark-mode #itineraryChanges h4 {
    color: #ffb74d !important;
  }

  body.dark-mode #itineraryChanges ul {
    color: #d7ccc8 !important;
  }

  body.dark-mode #itineraryChanges li {
    color: #d7ccc8 !important;
  }

  /* Dark mode: Improve Itinerary Modal */
  body.dark-mode .improve-modal .modal-content,
  body.dark-mode .adjust-modal .modal-content {
    background: #2a2a2a;
    color: #e8e8e8;
  }

  body.dark-mode .improve-modal .modal-body p,
  body.dark-mode .adjust-modal .modal-body p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn {
    background: #333 !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn h4 {
    color: #e8e8e8 !important;
  }

  body.dark-mode .improve-option-btn p {
    color: #cfcfcf !important;
  }

  body.dark-mode .improve-option-btn:hover {
    background: #3a3a3a !important;
    border-color: var(--sky-blue) !important;
  }

  body.dark-mode .adjust-modal .feedback-options label {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.15);
    color: #e8e8e8;
  }

  body.dark-mode .adjust-modal .feedback-options label:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  /* ============================================
   Enhanced UI - Dark Mode
   ============================================ */

  /* Quick Start Section */
  body.dark-mode .quick-start-section {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  }

  body.dark-mode .preference-input,
  body.dark-mode .api-input.compact {
    background: #333;
    border-color: #444;
    color: #e8e8e8;
  }

  body.dark-mode .preference-input:focus,
  body.dark-mode .api-input.compact:focus {
    border-color: var(--sky-blue);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
  }

  body.dark-mode .info-item label {
    color: #e8e8e8;
  }

  /* Enhanced Buttons */
  body.dark-mode .suggestion-btn-enhanced {
    background: #2a2a2a;
    border-color: #444;
  }

  body.dark-mode .suggestion-btn-enhanced .btn-text strong {
    color: #e8e8e8;
  }

  body.dark-mode .suggestion-btn-enhanced .btn-text small {
    color: #999;
  }

  body.dark-mode .sunny-enhanced:hover {
    background: #3a2a1a;
    border-color: #ffa726;
  }

  body.dark-mode .rainy-enhanced:hover {
    background: #1a2a3a;
    border-color: #42a5f5;
  }

  body.dark-mode .lucky-enhanced:hover {
    background: #2a1a3a;
    border-color: #ab47bc;
  }

  body.dark-mode .multi-enhanced:hover {
    background: #1a3a2a;
    border-color: #66bb6a;
  }

  /* More Settings Toggle */
  body.dark-mode .more-settings-toggle {
    background: #2a2a2a;
    border-color: #444;
    color: #e8e8e8;
  }

  body.dark-mode .more-settings-toggle:hover {
    background: #333;
    border-color: var(--sky-blue);
  }

  body.dark-mode .more-settings-content.expanded {
    background: #2a2a2a;
    border-color: #444;
  }

  /* Settings Groups */
  body.dark-mode .settings-group {
    border-bottom-color: #444;
  }

  body.dark-mode .settings-group-title {
    color: #e8e8e8;
  }

  body.dark-mode .setting-item label {
    color: #999;
  }

  body.dark-mode .hint-text {
    color: #999;
  }

  /* Image Preview */
  body.dark-mode .image-preview-compact {
    background: #333;
  }

  /* --- Override inline styles for buttons in dark mode --- */

  /* Download menu button - override inline #a2d2ff background */
  body.dark-mode #downloadMenuBtn {
    background-color: #444 !important;
    color: #fff !important;
    border-color: #777 !important;
  }

  body.dark-mode #downloadMenuBtn:hover {
    background-color: #606c38 !important;
    color: #ffffff !important;
  }

  /* Suggestion buttons - ensure consistent dark mode styling */
  body.dark-mode .suggestion-btn {
    background-color: transparent !important;
    border-color: #777 !important;
    color: #e8e8e8 !important;
  }

  body.dark-mode .suggestion-btn:hover {
    background-color: #606c38 !important;
    color: #ffffff !important;
  }

  /* Specific button types in dark mode */
  body.dark-mode #multiDayBtn,
  body.dark-mode #transportBtn {
    border-color: #8a9a5b !important;
    color: #a8d67c !important;
  }

  body.dark-mode #multiDayBtn:hover,
  body.dark-mode #transportBtn:hover {
    background-color: #606c38 !important;
    color: #ffffff !important;
  }

  /* Export and calendar buttons */
  body.dark-mode #exportIcsBtn,
  body.dark-mode #addToGoogleCalendarBtn,
  body.dark-mode #generateCoverImageBtn,
  body.dark-mode #downloadTransportPdfBtn {
    background-color: #444 !important;
    color: #fff !important;
    border-color: #777 !important;
  }

  body.dark-mode #exportIcsBtn:hover,
  body.dark-mode #addToGoogleCalendarBtn:hover,
  body.dark-mode #generateCoverImageBtn:hover,
  body.dark-mode #downloadTransportPdfBtn:hover {
    background-color: #606c38 !important;
    color: #ffffff !important;
  }
